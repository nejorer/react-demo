(this.webpackJsonpts_admin=this.webpackJsonpts_admin||[]).push([[0],{149:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a.n(n),c=(a(149),a(115),a(101)),s=a(33),i=(a(55),a(25)),u=(a(116),a(78)),d=(a(153),a(108)),l=a(0),o=a(262),b=(a(259),a(142)),j=a(79),O=a(21),f=c.a.confirm,m=function(e){var t=e.users,a=e.searchName,n=(""===a?t:t.filter((function(e){return-1!==e.name.indexOf(a)}))).map((function(e){return Object.assign(e,{key:e.id})})),r=function(t){return function(){f({title:"\u786e\u8ba4\u5220\u9664\u5417\uff1f",icon:Object(O.jsx)(j.a,{}),okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){e.deleteUser(t)},onCancel:function(){console.log("Cancel")}})}},c=[{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"\u5e74\u9f84",dataIndex:"age",key:"age"},{title:"\u64cd\u4f5c",dataIndex:"address",key:"address",render:function(t,a){return Object(O.jsxs)("div",{children:[Object(O.jsx)(i.a,{onClick:function(){return e.editRow(a)},style:{marginRight:"5px"},children:"\u7f16\u8f91"}),Object(O.jsx)(i.a,{onClick:r(a),children:"\u5220\u9664"})]})}}];return Object(O.jsx)("div",{children:Object(O.jsx)(b.a,{dataSource:n,columns:c})})},g=(a(260),a(82)),p=a(88),h=a(44),x=function(e){var t=Object(l.useState)(e.currentUser),a=Object(h.a)(t,2),n=a[0],r=a[1],c=function(e){var t=e.target,a=t.id,c=t.value;r(Object(s.a)(Object(s.a)({},n),{},Object(p.a)({},a,c)))};return Object(O.jsxs)(g.a,{onFinish:function(){e.editing?e.editUser(n):e.addUser(n)},children:[Object(O.jsx)(g.a.Item,{label:"\u59d3\u540d",name:"name",initialValue:n.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d\uff01"}],children:Object(O.jsx)(u.a,{onChange:c})}),Object(O.jsx)(g.a.Item,{label:"\u5e74\u9f84",name:"age",initialValue:n.age,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e74\u9f84\uff01"}],children:Object(O.jsx)(u.a,{onChange:c})}),Object(O.jsx)(g.a.Item,{children:Object(O.jsx)(i.a,{type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})},y=a(72),U=a.n(y),k=a(100),v=a(81),C=a.n(v),S=a(114),N=a.n(S),T=[{id:1,name:"\u5f20\u4e091",age:18},{id:2,name:"\u674e\u56db1",age:28},{id:3,name:"\u738b\u4e941",age:38},{id:4,name:"\u5c0f\u9ed11",age:38},{id:5,name:"\u5c0f\u65b91",age:48},{id:6,name:"\u5f20\u4e092",age:18},{id:7,name:"\u674e\u56db2",age:28},{id:8,name:"\u738b\u4e942",age:38},{id:9,name:"\u5c0f\u9ed12",age:38},{id:10,name:"\u5c0f\u65b92",age:48},{id:11,name:"\u5f20\u4e093",age:118},{id:12,name:"\u674e\u56db3",age:128},{id:13,name:"\u738b\u4e943",age:138},{id:14,name:"\u5c0f\u9ed13",age:138},{id:15,name:"\u5c0f\u65b93",age:148},{id:16,name:"\u5f20\u4e094",age:118},{id:17,name:"\u674e\u56db4",age:128},{id:18,name:"\u738b\u4e944",age:138},{id:19,name:"\u5c0f\u9ed14",age:138},{id:20,name:"\u5c0f\u65b94",age:148}];N.a.mock("/userdata","get",{success:!0,data:T}),N.a.mock("/userdata","post",(function(e){var t=JSON.parse(e.body);if("delete"===t.type)return console.log("\u8fdb\u5165\u5220\u9664\u4e86",t),T=T.filter((function(e){return e.id!==t.user.id}));if("add"===t.type)return console.log("\u8fdb\u5165\u6dfb\u52a0\u4e86"),T=T.concat(t.user);if("edit"===t.type)return console.log("\u8fdb\u5165\u4fee\u6539\u4e86"),T=T.map((function(e){return e.id===t.user.id?t.user:e}));if("find"===t.type){console.log("\u8fdb\u5165\u67e5\u627e\u4e86");var a=T.filter((function(e){return-1!==e.name.indexOf(t.name)}));return t.name.length>0?a:T}}));var w="http://localhost:3001/";function F(e){return I.apply(this,arguments)}function I(){return(I=Object(k.a)(U.a.mark((function e(t){var a,n,r,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("load"!==t.type){e.next=7;break}return e.next=3,C.a.get(w+"api/users");case 3:return a=e.sent,e.abrupt("return",a.data);case 7:if("add"!==t.type){e.next=14;break}return e.next=10,C.a.post(w+"api/add",{user:t.curUser,type:"add"});case 10:return n=e.sent,e.abrupt("return",n.data);case 14:if("delete"!==t.type){e.next=21;break}return e.next=17,C.a.post(w+"api/delete",{user:t.curUser,type:"delete"});case 17:return r=e.sent,e.abrupt("return",r.data);case 21:if("edit"!==t.type){e.next=26;break}return e.next=24,C.a.post(w+"api/edit",{user:t.curUser,type:"edit"});case 24:return c=e.sent,e.abrupt("return",c.data);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E={type:"load",curUser:{id:0,name:"",age:""},visible:!1,searchName:""};var Q={id:0,name:"",age:""};a(257);var q=a(143),A=d.a.Header,J=d.a.Content,R=u.a.Search,D=function(){var e=function(){var e=Object(l.useState)(E),t=Object(h.a)(e,2),a=t[0],n=t[1],r=Object(l.useState)(""),c=Object(h.a)(r,2),i=c[0],u=c[1],d=Object(l.useCallback)((function(){n((function(e){return Object(s.a)(Object(s.a)({},e),{},{type:"load"})}))}),[n]);return{queryFilter:a,searchName:i,addUser:Object(l.useCallback)((function(e){console.log("useQueryFilterTest addUser"),n((function(t){return console.log("preState",t),Object(s.a)(Object(s.a)({},t),{},{type:"add",curUser:e,visible:!1})})),console.log("useQueryFilterTest addUser end")}),[n]),deleteUser:Object(l.useCallback)((function(e){console.log("useQueryFilterTest deleteUser"),n((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"delete",curUser:e,visible:!1})})),console.log("useQueryFilterTest deleteUser end")}),[n]),editUser:Object(l.useCallback)((function(e){console.log("useQueryFilterTest deleteUser"),n((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:"edit",curUser:e,visible:!1})})),console.log("useQueryFilterTest deleteUser end")}),[n]),findUser:Object(l.useCallback)((function(e){u(e)}),[u]),loadUser:d}}(),t=e.queryFilter,a=e.searchName,n=e.addUser,r=e.deleteUser,u=e.editUser,b=e.findUser,j=function(e){var t=Object(l.useState)([]),a=Object(h.a)(t,2),n=a[0],r=a[1],c=Object(l.useCallback)(Object(k.a)(U.a.mark((function t(){var a;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F(e);case 3:a=t.sent,r(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e]);return Object(l.useEffect)((function(){c()}),[c]),{userData:n}}(t).userData,f=function(){var e=Object(l.useState)(Q),t=Object(h.a)(e,2),a=t[0],n=t[1],r=Object(l.useState)(!1),c=Object(h.a)(r,2),s=c[0],i=c[1],u=Object(l.useState)(!1),d=Object(h.a)(u,2),o=d[0],b=d[1],j=Object(l.useCallback)((function(){n(Q)}),[n]);return{currentUser:a,editing:s,visible:o,closeModal:Object(l.useCallback)((function(){b(!1),i(!1)}),[b,i]),modalAdd:Object(l.useCallback)((function(){console.log("handleAdd"),b(!0),i(!1)}),[b,i]),modalEdit:Object(l.useCallback)((function(e){n(e),b(!0),i(!0)}),[n,b,i]),resetCurrentUser:j}}(),g=f.currentUser,p=f.editing,y=f.visible,v=f.closeModal,C=f.modalAdd,S=f.modalEdit,N=f.resetCurrentUser;return Object(l.useEffect)((function(){v()}),[j,v]),Object(l.useEffect)((function(){!1===p&&N()}),[p,N]),console.log("searchName",a),Object(O.jsxs)(d.a,{children:[Object(O.jsx)(A,{className:"header",children:Object(O.jsx)("h1",{children:"\u7528\u6237\u5217\u8868"})}),Object(O.jsxs)(J,{className:"content",children:[Object(O.jsx)(R,{placeholder:"\u8f93\u5165\u59d3\u540d\u8fdb\u884c\u67e5\u627e",onSearch:b,style:{width:200}}),Object(O.jsxs)(i.a,{className:"addUser",onClick:C,children:[" ",Object(O.jsx)(o.a,{}),"\u6dfb\u52a0\u7528\u6237"]}),Object(O.jsx)(m,{users:j,searchName:a,deleteUser:r,editRow:S}),Object(O.jsx)(c.a,{title:p?"\u7f16\u8f91\u7528\u6237":"\u6dfb\u52a0\u7528\u6237",visible:y,onCancel:v,destroyOnClose:!0,footer:null,children:Object(O.jsx)(x,{currentUser:""===g.name?Object(s.a)(Object(s.a)({},g),{},{id:Object(q.a)()}):g,editing:p,addUser:n,editUser:u})})]})]})};r.a.render(Object(O.jsx)(D,{}),document.getElementById("root"))}},[[258,1,2]]]);
//# sourceMappingURL=main.b4a03588.chunk.js.map